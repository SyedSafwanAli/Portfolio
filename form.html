<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contact Form with reCAPTCHA</title>
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
  <style>
    .error { color: red; font-size: 13px; margin-top: 3px; }
    #formResponse { margin-top: 15px; font-size: 14px; }
    .form-container { max-width: 500px; margin: auto; padding: 20px; background: #fff; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    .form-group { margin-bottom: 15px; }
    input, textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; }
    button { padding: 12px; width: 100%; border: none; border-radius: 5px; background: #007bff; color: white; font-size: 16px; cursor: pointer; }
    button:disabled { background: #999; cursor: not-allowed; }
  </style>
</head>
<body>
  <div class="form-container">
    <form id="contactForm" novalidate>
      <div class="form-group">
        <input type="email" id="email" name="email" placeholder="Email Address" required>
        <label for="email">Email Address</label>
        <div class="error" id="emailError"></div>
      </div>

      <div class="form-group">
        <input type="text" id="name" name="name" placeholder="Your Name" required>
        <label for="name">Your Name</label>
        <div class="error" id="nameError"></div>
      </div>

      <div class="form-group">
        <input type="tel" id="contact" name="contact" placeholder="Your Contact" required>
        <label for="contact">Your Contact</label>
        <div class="error" id="contactError"></div>
      </div>

      <div class="form-group message-group">
        <textarea id="message" name="message" placeholder="Your Message" rows="5" required></textarea>
        <label for="message">Your Message</label>
        <div class="error" id="messageError"></div>
      </div>

      <!-- reCAPTCHA -->
      <div class="g-recaptcha" data-sitekey="YOUR_SITE_KEY"></div>
      <div class="error" id="captchaError"></div>

      <button type="submit" class="submit-btn">Send</button>
    </form>

    <!-- Success / Error message -->
    <div id="formResponse"></div>
  </div>

  <script>
    const form = document.getElementById("contactForm");
    const responseBox = document.getElementById("formResponse");

    form.addEventListener("submit", async function (e) {
      e.preventDefault();

      let valid = true;

      // Email validation
      const email = document.getElementById("email");
      const emailError = document.getElementById("emailError");
      if (!email.value.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)) {
        emailError.textContent = "Please enter a valid email address.";
        valid = false;
      } else {
        emailError.textContent = "";
      }

      // Name validation
      const name = document.getElementById("name");
      const nameError = document.getElementById("nameError");
      if (name.value.trim().length < 3) {
        nameError.textContent = "Name must be at least 3 characters.";
        valid = false;
      } else {
        nameError.textContent = "";
      }

      // Contact validation
      const contact = document.getElementById("contact");
      const contactError = document.getElementById("contactError");
      if (!contact.value.match(/^[0-9]{10}$/)) {
        contactError.textContent = "Enter a valid 10-digit number.";
        valid = false;
      } else {
        contactError.textContent = "";
      }

      // Message validation
      const message = document.getElementById("message");
      const messageError = document.getElementById("messageError");
      if (message.value.trim().length < 10) {
        messageError.textContent = "Message must be at least 10 characters.";
        valid = false;
      } else {
        messageError.textContent = "";
      }

      // reCAPTCHA validation
      const captchaError = document.getElementById("captchaError");
      if (grecaptcha.getResponse().length === 0) {
        captchaError.textContent = "Please verify that you're not a robot.";
        valid = false;
      } else {
        captchaError.textContent = "";
      }

      if (!valid) return;

      // Disable button while sending
      const btn = form.querySelector("button");
      btn.disabled = true;
      btn.textContent = "Sending...";

      try {
        const res = await fetch("https://formspree.io/f/mqadjqqn", {
          method: "POST",
          body: new FormData(form),
          headers: { Accept: "application/json" }
        });

        if (res.ok) {
          responseBox.innerHTML = `<p style="color:green;">✅ Message sent successfully!</p>`;
          form.reset();
          grecaptcha.reset();
        } else {
          responseBox.innerHTML = `<p style="color:red;">❌ Something went wrong. Try again later.</p>`;
        }
      } catch (err) {
        responseBox.innerHTML = `<p style="color:red;">⚠️ Network error. Please try again.</p>`;
      }

      // Reset button
      btn.disabled = false;
      btn.textContent = "Send";
    });
  </script>
</body>
</html>
